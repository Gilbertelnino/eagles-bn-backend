<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="author" content="eagles">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="viewport" content="width=device-width, maximum-scale=1.0">
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<meta name="keywords" content="barefoot nomad">
	<title>Barefoot Nomad | Welcome Page</title>
	<link rel="stylesheet" href="./style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
	<style>
		body {
		  background-color: gray;
		}
		body input {
		  bottom: 10%;
		}
	  </style>
	  
	<header>	
	   <div class="container">
			<div class="bell">
				<input id="receiverId" required><i id="iconBell" class="fa fa-bell hide"></i>
			</div>
			<div class="bel">
				<i id="iconBel" class="fa fa-bell hide"></i>
				<i id="iconBe" class="fa fa-bell"></i>
			</div>
			<div class="panel hide">
				<h2 id="plate"><br>NOTIFICATIONS</h2>
				<h5 id="body"></h5>
			</div>
		</div>
	</header>
	<input type="text" id="auth-token" placeholder="auth-token" />
	  <button type="button" name="button" onclick="setUser()">
		Setting Up User
	  </button>
	<script src="/socket.io/socket.io.js"></script>
	<script src="./socket.js"></script>

	<script>
		function setUser(){
			const token = document.getElementById('auth-token').value;
			socket = io({ query: `auth_token=${token}` }); 
			socket.on('fetchNotification', (userData) => {
			const List = document.getElementById("body");
			for (let i = 0; i < userData.length; i++) {
				const item = userData[i].description;
				const elem = document.createElement("li");
				elem.innerHTML = item;
				List.appendChild(elem);
			}
           });

		socket.on('notification', (data) => {
		const realTimeNotification = [];
		realTimeNotification.push(data);
		const mainList = document.getElementById("body");
		for (let i = 0; i < realTimeNotification.length; i++) {
			const item = realTimeNotification[i];
			const elem = document.createElement("li");
			elem.innerText = item;
			mainList.prepend(elem);
		}
		});  
		}
		setUser();
	</script>
	
</body>

</html>